<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title> Introdução ao RMarkdown e     seus Principais Componentes </title>
    <meta charset="utf-8" />
    <meta name="author" content=" João Lucas Simon     Leonardo Ribeiro Damiani Júnior     27 de Setembro de 2022 " />
    <script src="rmarkdown_intro_files/header-attrs-2.13/header-attrs.js"></script>
    <link href="rmarkdown_intro_files/remark-css-0.0.1/tamu.css" rel="stylesheet" />
    <link href="rmarkdown_intro_files/remark-css-0.0.1/default-fonts.css" rel="stylesheet" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

.title[
# <span style="font-size:140%"> Introdução ao RMarkdown e </span> <br> <span style="font-size:140%"> seus Principais Componentes </span>
]
.author[
### <span style="font-size:70%; color:grey"> João Lucas Simon </span> <br> <span style="font-size:70%; color:grey"> Leonardo Ribeiro Damiani Júnior </span> <br> <span style="font-size:70%; color:grey"> 27 de Setembro de 2022 </span>
]

---






class: center, middle

# &lt;h1 style="font-size:350%; color:DarkRed"&gt;**Pré - Requisitos**&lt;/h1&gt;

## R

## RStudio


---

# &lt;h1 style="color:DarkRed"&gt; Rápida Introdução ao RStudio &lt;/h1&gt;

Interface para facilitar o uso da linguagem &lt;c class="blue3"&gt; R&lt;/c&gt;.

- Intuitivo;

- Windows, Linux e IOS - MAC.

Links para as instalações:

- https://cran.r-project.org/ (R)

- https://www.rstudio.com/products/rstudio/ (RStudio)

&lt;/br&gt;

&lt;img src="https://www.rstudio.com/wp-content/uploads/2018/10/RStudio-Logo-Flat.png" width="40%" style="display: block; margin: auto;" /&gt;

---

class: center, middle

# &lt;h1 style="font-size:350%; color:DarkRed"&gt;**RMarkdown**&lt;/h1&gt;

---

# &lt;h1 style="color:DarkRed"&gt; Afinal, o que é RMarkdown? &lt;/h1&gt;

RMarkdown é um formato para escrevermos: 

- &lt;span style="color:DarkRed"&gt; **Relatórios reprodutíveis e dinâmicos** &lt;/span&gt; com R. 

- Usado para incorporar &lt;span style="color:DarkRed"&gt; **código R  + Markdown + HTML + LaTeX + outros** &lt;/span&gt;.

- Utilizamos o pacote &lt;span style="color:DarkRed"&gt; **RMarkdown** &lt;/span&gt; .

- Extensão &lt;span style="color:DarkRed"&gt;**.Rmd** &lt;/span&gt;

- Link: https://rmarkdown.rstudio.com/

&lt;img src="https://www.kindpng.com/picc/m/440-4405234_rmarkdown-logo-png-transparent-png.png" width="22%" style="display: block; margin: auto 0 auto auto;" /&gt;

---



# &lt;h1 style="color:DarkRed"&gt; Como funciona? &lt;/h1&gt;

&lt;/br&gt;
&lt;img src="https://d33wubrfki0l68.cloudfront.net/61d189fd9cdf955058415d3e1b28dd60e1bd7c9b/b739c/lesson-images/rmarkdownflow.png" width="100%" style="display: block; margin: auto;" /&gt;
&lt;/br&gt;

- &lt;span style="color:DarkRed"&gt; **KNITR (KNIT + R)** &lt;/span&gt; 

Permite “entrelaçar” textos do LaTeX, HTML e Markdown com códigos do R.

&lt;/br&gt;

- &lt;span style="color:DarkRed"&gt; **O Pandoc** &lt;/span&gt;

Um conversor extremamente versátil, capaz de converter diversos formatos.

---


## &lt;h1 style="color:DarkRed"&gt; Saídas &lt;/h1&gt;

&lt;img src="https://d33wubrfki0l68.cloudfront.net/6d02e245de5328f2e9c25ca82eb7315717dcafa7/62e43/images/rmarkdownoutputformats.png" width="55%" style="display: block; margin: auto;" /&gt;

---


# &lt;h1 style="color:DarkRed"&gt; Instalação do Pacote RMarkdown &lt;/h1&gt;

- Instalamos o pacote necessário: **`install.packages("rmarkdown")`**


&lt;div class="figure" style="text-align: center"&gt;
&lt;img src="https://www.bahmanrt.com/post/intro-furw/rmarkdown-art.png" alt="Ilustração por Allison Horst - Twitter: @allison_horst" width="70%" /&gt;
&lt;p class="caption"&gt;Ilustração por Allison Horst - Twitter: @allison_horst&lt;/p&gt;
&lt;/div&gt;


---


## &lt;h1 style="color:DarkRed"&gt; Estrutura do RMarkdown &lt;/h1&gt;

&lt;div class="figure" style="text-align: center"&gt;
&lt;img src="https://github.com/joaolsimon1/Academic-Week/raw/main/imagens/estrutura.png" alt="Captura de tela da IDE RStudio" width="100%" /&gt;
&lt;p class="caption"&gt;Captura de tela da IDE RStudio&lt;/p&gt;
&lt;/div&gt;

---

### &lt;h2 style="color:DarkRed"&gt; YAML (1) &lt;/h2&gt;

Seção de metadados, que apresenta &lt;span style="color:DarkRed"&gt; códigos YAML &lt;/span&gt;.

- Informações usadas para gerar o arquivo final. 

- Exemplos: **título do relatório, autoria, data, formato gerado, etc **.

- YAML é delimitado por três traços no começo e no final: ---

Temos como principais argumentos para os outputs:

- &lt;span style="color:purple"&gt; pdf_document &lt;/span&gt;
- &lt;span style="color:purple"&gt; html_document &lt;/span&gt;
- &lt;span style="color:purple"&gt; word_document &lt;/span&gt;
- &lt;span style="color:purple"&gt; beamer_presentation &lt;/span&gt;
- &lt;span style="color:purple"&gt; ioslides_presentation &lt;/span&gt;


---

### &lt;h2 style="color:DarkRed"&gt; Chunks (2) &lt;/h2&gt;

Campos de código chamados de **chunks**. 

- Podemos adicionar &lt;span style="color:DarkRed"&gt; códigos em R ou em algumas outras linguagens &lt;/span&gt;. 

- Delimitados por três crases, e a linguagem deve ser especificada entre chaves. 

- Chunks com código em Python, é necessário ter o pacote {reticulate} instalado. 

### &lt;h2 style="color:DarkRed"&gt; Markdown, HTML ou LaTeX (3) &lt;/h2&gt;

- Textos com &lt;span style="color:DarkRed"&gt; Markdown, HTML ou LaTeX &lt;/span&gt; adicionados ao longo do relatório.

- Fora das demarcações do YAML e dos Chunks.

---

class: center, middle

# &lt;h1 style="font-size:350%; color:DarkRed"&gt;**Construindo nosso Relatório**&lt;/h1&gt;

---

# &lt;h1 style="color:Chocolate"&gt; Exemplo PDF &lt;/h1&gt;

- Iremos criar um relatório em **.pdf** a partir do RMarkdown.

- Primeiro, utilizaremos o seguinte pacote para utilização do LaTeX:

```
install.packages('tinytex')
# Função para instalar o Tinytex
tinytex::install_tinytex()
```

&lt;/br&gt;

- Além disso, para criarmos um &lt;span style = "color:purple"&gt; pdf_document &lt;/span&gt; informamos para o YAML:

&lt;/br&gt;

```
---
title: "Relatório PDF"
author: Aluno UFRGS
date: September 27, 2022
output: pdf_document
---
```

---

# &lt;h2 style="color:Chocolate"&gt;  Exemplo PDF - Fórmulas e Operações &lt;/h2&gt;

Assim, com o TinyTex instalado, podemos gerar fórmulas em LaTeX.

&lt;img src="https://github.com/joaolsimon1/Academic-Week/raw/main/imagens/latex.png" width="60%" style="display: block; margin: auto;" /&gt;


&lt;/br&gt;

Através dos chunks, também podemos fazer operações através do R.


```r
resultado = 20 + 79
print(resultado)
```

```
## [1] 99
```

```r
x = sqrt(resultado * 2) # raiz do dobro
print(x)
```

```
## [1] 14.07125
```



---

# &lt;h2 style="color:Chocolate"&gt; Exemplo PDF - Item, Subitem e Índice &lt;/h2&gt;

 Antes de criarmos nossos chunks, podemos dividir o relatório de acordo com seu índice, digitando acima do chunk a &lt;span style="color:DarkRed"&gt;**"#"** &lt;/span&gt; de acordo com o grau do item :
 
``` 
# Item 1

# Item 2`

## Subitem 1

# Item 3
```

 E após, podemos acessar o índice pelo ícone mostrado abaixo para percorrer o script de acordo com as divisões feitas:
 
&lt;img src="https://github.com/joaolsimon1/Academic-Week/raw/main/imagens/indice.png" width="40%" style="display: block; margin: auto;" /&gt;

 Atalho para o índice: &lt;span style="color:DarkRed"&gt; Ctrl + Shift + O &lt;/span&gt;


---


# &lt;h2 style="color:Chocolate"&gt; Exemplo PDF - Código do R&lt;/h2&gt;

Utilizaremos o banco de dados **gapminder** do pacote **dslabs**.



```r
library(tidyverse)
library(dslabs)

# Carregando o nosso banco de dados
data(gapminder)

# Nome das variáveis
options(width = 50)
colnames(gapminder)
```

```
## [1] "country"          "year"            
## [3] "infant_mortality" "life_expectancy" 
## [5] "fertility"        "population"      
## [7] "gdp"              "continent"       
## [9] "region"
```



---

# &lt;h2 style="color:Chocolate"&gt; Exemplo PDF - Resumo dos Dados &lt;/h2&gt;

`{r echo=TRUE}`

```r
str(gapminder)
```

```
## 'data.frame':	10545 obs. of  9 variables:
##  $ country         : Factor w/ 185 levels "Albania","Algeria",..: 1 2 3 4 5 6 7 8 9 10 ...
##  $ year            : int  1960 1960 1960 1960 1960 1960 1960 1960 1960 1960 ...
##  $ infant_mortality: num  115.4 148.2 208 NA 59.9 ...
##  $ life_expectancy : num  62.9 47.5 36 63 65.4 ...
##  $ fertility       : num  6.19 7.65 7.32 4.43 3.11 4.55 4.82 3.45 2.7 5.57 ...
##  $ population      : num  1636054 11124892 5270844 54681 20619075 ...
##  $ gdp             : num  NA 1.38e+10 NA NA 1.08e+11 ...
##  $ continent       : Factor w/ 5 levels "Africa","Americas",..: 4 1 1 2 2 3 2 5 4 3 ...
##  $ region          : Factor w/ 22 levels "Australia and New Zealand",..: 19 11 10 2 15 21 2 1 22 21 ...
```

---

# &lt;h2 style="color:Chocolate"&gt; Exemplo PDF - Resumo dos Dados &lt;/h2&gt;

- Obtendo a informação da média da expectativa de vida em cada continente: 


```r
aux1 &lt;- aggregate(life_expectancy ~ continent, gapminder, mean)

colnames(aux1) &lt;- c("Continente", "Anos")

kable(aux1, digits = 2, align = "c", caption = "Expectativa de Vida em cada Continente ")
```



Table: Expectativa de Vida em cada Continente 

| Continente | Anos  |
|:----------:|:-----:|
|   Africa   | 54.38 |
|  Americas  | 68.77 |
|    Asia    | 65.90 |
|   Europe   | 73.56 |
|  Oceania   | 64.58 |
---

# &lt;h2 style="color:Chocolate"&gt; Exemplo PDF - Resumo dos Dados &lt;/h2&gt;

- Se não quisermos que os códigos apareçam no output, basta mudarmos a configuração do chunk **echo** para **FALSE**:

`{r echo=FALSE}`

Table: Expectativa de Vida em cada Continente 

| Continente | Anos  |
|:----------:|:-----:|
|   Africa   | 54.38 |
|  Americas  | 68.77 |
|    Asia    | 65.90 |
|   Europe   | 73.56 |
|  Oceania   | 64.58 |
---

# &lt;h2 style="color:Chocolate"&gt; Exemplo PDF - Gerando um Gráfico no R &lt;/h2&gt;

&lt;center&gt;
`{r echo=FALSE, fig.height=4, fig.width=4}`
&lt;/center&gt;
&lt;img src="rmarkdown_intro_files/figure-html/unnamed-chunk-15-1.png" style="display: block; margin: auto;" /&gt;

- O tamanho do gráfico pode ser alterado com os comandos **fig.height** e **fig.width** mostrados acima, além do comando **out.width**, onde passamos a porcentagem que queremos que o gráfico aumente ou diminua.
---

# &lt;h2 style="color:Chocolate"&gt; Exemplo PDF - Configurações do Chunk &lt;/h2&gt;

- As alterações feitas nos slides anteriores além de poderem ser feitas escrevendo os comenados, podem ser feitas através do painel interativo **Opções de Modificação do Chunk**, que se encontram no lado superior direito de cada chunk:

&lt;div class="figure" style="text-align: center"&gt;
&lt;img src="https://github.com/joaolsimon1/Academic-Week/raw/main/imagens/chunk_options.png" alt="Captura de tela da IDE RStudio" width="70%" /&gt;
&lt;p class="caption"&gt;Captura de tela da IDE RStudio&lt;/p&gt;
&lt;/div&gt;

---


# &lt;h2 style="color:Chocolate"&gt; Exemplo PDF - Compilar &lt;/h2&gt;

- Para compilarmos o documento no formato que especificamos na YAML, usamos a opção **Knit**:

&lt;div class="figure" style="text-align: center"&gt;
&lt;img src="https://github.com/joaolsimon1/Academic-Week/raw/main/imagens/knit.png" alt="Captura de tela da IDE RStudio" width="60%" /&gt;
&lt;p class="caption"&gt;Captura de tela da IDE RStudio&lt;/p&gt;
&lt;/div&gt;

- É importante ressaltar que para a compilação funcionar, todos os arquivos declarados no script (.png, .xlsx, etc.) devem estar na mesma pasta que o documento .Rmd está salvo;

- O arquivo gerado (compilado) ficará salvo na mesma pasta em que se encontra o .Rmd.

---


# &lt;h1 style="color:YellowGreen"&gt; Exemplo HTML &lt;h1&gt;

- Para criarmos um &lt;span style = "color:purple"&gt; html_document &lt;/span&gt;, basta alterarmos no output da YAML:

```
---
title: "Relatório HTML"
author: Aluno UFRGS
date: September 27, 2022
output: html_document
---
```

- Além disso, utilizando o html não temos a opção do LaTeX, porém abrimos a porta ao html e algumas das funções funcionam apenas no modo html. Como é o caso da funçaõ do R abaixo:


`include_graphics('grafico.png')`



---


# &lt;h1 style="color:DarkBlue"&gt; Exemplo WORD &lt;h1&gt;

- Para criarmos um &lt;span style = "color:purple"&gt; word_document &lt;/span&gt;, basta alterarmos no output da YAML:

```
---
title: "Relatório WORD"
author: Aluno UFRGS
date: September 27, 2022
output: word_document
reference_docx: "template.docx"
---
```

- Se for de interesse mudar o estilo do word (fonte, cor dos títulos, espaçamento entre as linhas, etc.), você pode salvar o documento .docx e usá-lo como modelo para futuros documentos do Word. 

- Quando o Pandoc renderiza um novo documento do Word com um documento de referência (modelo), ele lê os estilos no modelo e os aplica ao novo documento.


---

# &lt;h1 style="color:DarkRed"&gt; Referências &lt;/h1&gt;

&lt;/br&gt;

**R Markdown: The Definitive Guide**

- https://bookdown.org/yihui/rmarkdown/

&lt;/br&gt;

**R Markdown Cookbook**

- https://bookdown.org/yihui/rmarkdown-cookbook/

---

&lt;img src="https://www.bahmanrt.com/post/intro-furw/r-good.png" width="60%" style="display: block; margin: auto;" /&gt;

    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create();
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// add `data-at-shortcutkeys` attribute to <body> to resolve conflicts with JAWS
// screen reader (see PR #262)
(function(d) {
  let res = {};
  d.querySelectorAll('.remark-help-content table tr').forEach(tr => {
    const t = tr.querySelector('td:nth-child(2)').innerText;
    tr.querySelectorAll('td:first-child .key').forEach(key => {
      const k = key.innerText;
      if (/^[a-z]$/.test(k)) res[k] = t;  // must be a single letter (key)
    });
  });
  d.body.setAttribute('data-at-shortcutkeys', JSON.stringify(res));
})(document);
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
